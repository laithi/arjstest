<!DOCTYPE html>
<html>
<head>
  <title>AR.js Face Tracking Example</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.0/aframe/build/aframe-ar.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tracking.js/1.1.3/tracking-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tracking.js/1.1.3/data/face-min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <video id="video" width="640" height="480" autoplay muted></video>
  <a-scene embedded arjs>
    <a-box id="face-box" color="red" depth="0.1" height="0.1" width="0.1"></a-box>
    <a-entity camera></a-entity>
  </a-scene>
  <script>
    navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
      var video = document.getElementById('video');
      video.srcObject = stream;
    });

    var tracker = new tracking.ObjectTracker('face');
    tracker.setInitialScale(4);
    tracker.setStepSize(2);
    tracker.setEdgesDensity(0.1);

    tracking.track('#video', tracker, { camera: true });

    tracker.on('track', function(event) {
      var box = document.getElementById('face-box');
      event.data.forEach(function(rect) {
        var x = (rect.x / video.width) * 2 - 1;
        var y = (rect.y / video.height) * 2 - 1;
        box.setAttribute('position', {x: x, y: y, z: -3});
      });
    });
  </script>
</body>
</html>
